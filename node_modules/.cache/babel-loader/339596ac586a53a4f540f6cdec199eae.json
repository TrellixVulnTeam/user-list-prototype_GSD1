{"ast":null,"code":"import _slicedToArray from\"/Users/jamesdow/Documents/projects/interview-challenges/lifeway/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _createClass from\"/Users/jamesdow/Documents/projects/interview-challenges/lifeway/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _classCallCheck from\"/Users/jamesdow/Documents/projects/interview-challenges/lifeway/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import{useEffect,useState}from'react';import{prefix}from'../../globals';import getUser from'../../utilities/getUser';import saveUser from'../../utilities/saveUser';import validate from'../../utilities/validate';import Button from'../Button';import TextInput from'../TextInput';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var userCopy;var User=/*#__PURE__*/_createClass(function User(){var user=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var validate=arguments.length>1?arguments[1]:undefined;_classCallCheck(this,User);this.name=validate?user.name:user.name||'';this.email=validate?user.email:user.email||'';this.phone=validate?user.phone:user.phone||'';if(user.id){this.id=user.id;}});function UserForm(_ref){var editUser=_ref.editUser,sharedState=_ref.sharedState,switchPanel=_ref.switchPanel;var _useState=useState(new User()),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(new User({},true)),_useState4=_slicedToArray(_useState3,2),validationResults=_useState4[0],setValidationResults=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),disabledSubmit=_useState6[0],setDisabledSubmit=_useState6[1];useEffect(function(){if(editUser.id){getUser(editUser.id).then(function(data){userCopy=JSON.parse(JSON.stringify(data));// make a copy to compare later\nsetUser(new User(data));});}else{setUser(new User());}},[editUser]);return/*#__PURE__*/_jsxs(\"form\",{className:\"\".concat(prefix,\"-user-form\"),onSubmit:function onSubmit(e){return saveForm(e);},children:[/*#__PURE__*/_jsx(TextInput,{className:\"\".concat(prefix,\"-user-form__input\"),id:\"name\",name:\"name\",label:\"Name\",validate:getValidation(validationResults.name),onChange:function onChange(e){trackValidation(e);trackUserChanges(e);},value:user.name||''}),/*#__PURE__*/_jsx(TextInput,{className:\"\".concat(prefix,\"-user-form__input\"),id:\"email\",name:\"email\",label:\"Email\",validate:getValidation(validationResults.email),onChange:function onChange(e){trackValidation(e);trackUserChanges(e);},value:user.email||''}),/*#__PURE__*/_jsx(TextInput,{className:\"\".concat(prefix,\"-user-form__input\"),id:\"phone\",name:\"phone\",label:\"Phone\",validate:getValidation(validationResults.phone),onChange:function onChange(e){trackValidation(e);trackUserChanges(e);e.target.value=displayPhone(e.target.value);},value:displayPhone(user.phone)||''}),/*#__PURE__*/_jsx(\"input\",{className:\"\".concat(prefix,\"-user-form__input\"),id:\"id\",name:\"id\",value:user.id||'',type:\"hidden\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(prefix,\"-user-form__actions\"),children:[/*#__PURE__*/_jsx(Button,{size:\"lg\",styleType:\"primary\",type:\"submit\",disabled:disabledSubmit,children:\"Save\"}),/*#__PURE__*/_jsx(Button,{size:\"lg\",styleType:\"secondary\",onClick:clearForm,children:\"Cancel\"})]})]});function trackUserChanges(e){user[e.target.id]=e.target.id==='phone'?cleanPhone(e.target.value):e.target.value.trim();setUser(new User(user));enableSaveButton(user,userCopy);}function trackValidation(e){validationResults[e.target.id]=validate[e.target.id](e.target.value.trim());setValidationResults(new User(validationResults,true));}function clearForm(e){switchPanel(e);setUser(new User());Object.keys(validationResults).forEach(function(key){validationResults[key]='';});setValidationResults(new User(validationResults,true));}function enableSaveButton(user,userCopy){console.log(user,userCopy);console.log(userHasChanged(user,userCopy),validateEverything(user));if(userHasChanged(user,userCopy)&&validateEverything(user)){setDisabledSubmit(false);// ready to submit\n}else{setDisabledSubmit(true);// not ready to submit\n}}function validateEverything(user){var keys=Object.keys(user);for(var i=0;i<keys.length;i++){var key=keys[i];if(key!=='id'&&!validate[key](user[key])){return false;// something went wrong\n}}return true;// everything checks out\n}function userHasChanged(user,userCopy){if(!userCopy){return true;// nothing exists, so something has to be different\n}var keys=Object.keys(user);for(var i=0;i<keys.length;i++){var key=keys[i];if(key!=='id'&&user[key]&&userCopy[key]&&user[key]!==userCopy[key]){return true;// something is different!\n}}}function saveForm(e){e.preventDefault();saveUser(user).then(function(savedUser){switchPanel(e);sharedState.saveUser(savedUser,editUser.index);});}function cleanPhone(str){return str.replace(/\\D/g,'');}function displayPhone(){var str=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var formattedPhone;str=cleanPhone(str);if(str.length<=7){formattedPhone=[str.slice(0,3),str.slice(3,str.length)];}else{formattedPhone=[str.slice(0,3),str.slice(3,6),str.slice(6,str.length)];}return formattedPhone.filter(function(d){return d.length;}).join('-');}function getValidation(result){if(result===false){return'error';}else if(result===true){return'valid';}return'';}}export default UserForm;","map":{"version":3,"sources":["/Users/jamesdow/Documents/projects/interview-challenges/lifeway/src/frontend/components/UserForm/index.js"],"names":["useEffect","useState","prefix","getUser","saveUser","validate","Button","TextInput","userCopy","User","user","name","email","phone","id","UserForm","editUser","sharedState","switchPanel","setUser","validationResults","setValidationResults","disabledSubmit","setDisabledSubmit","then","data","JSON","parse","stringify","e","saveForm","getValidation","trackValidation","trackUserChanges","target","value","displayPhone","clearForm","cleanPhone","trim","enableSaveButton","Object","keys","forEach","key","console","log","userHasChanged","validateEverything","i","length","preventDefault","savedUser","index","str","replace","formattedPhone","slice","filter","d","join","result"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\nimport { prefix } from '../../globals';\nimport getUser from '../../utilities/getUser';\nimport saveUser from '../../utilities/saveUser';\nimport validate from '../../utilities/validate';\nimport Button from '../Button';\nimport TextInput from '../TextInput';\n\nlet userCopy;\n\nclass User {\n  constructor(user = {}, validate) {\n    this.name = validate ? user.name : user.name || '';\n    this.email = validate ? user.email : user.email || '';\n    this.phone = validate ? user.phone : user.phone || '';\n\n    if (user.id) {\n      this.id = user.id;\n    }\n  }\n}\n\nfunction UserForm ({ editUser, sharedState, switchPanel }) {\n  const [user, setUser] = useState(new User());\n  const [validationResults, setValidationResults] = useState(new User({}, true));\n  const [disabledSubmit, setDisabledSubmit] = useState(true);\n\n  useEffect(() => {\n    if (editUser.id) {\n      getUser(editUser.id).then((data) => {\n        userCopy = JSON.parse(JSON.stringify(data)); // make a copy to compare later\n        setUser(new User(data))\n      });\n    } else {\n      setUser(new User());\n    }\n  }, [editUser]);\n\n  return (\n    <form\n      className={`${prefix}-user-form`}\n      onSubmit={e => saveForm(e)}>\n      <TextInput\n        className={`${prefix}-user-form__input`}\n        id=\"name\"\n        name=\"name\"\n        label=\"Name\"\n        validate={getValidation(validationResults.name)}\n        onChange={e => {\n          trackValidation(e);\n          trackUserChanges(e);\n        }}\n        value={user.name || ''} />\n      <TextInput\n        className={`${prefix}-user-form__input`}\n        id=\"email\"\n        name=\"email\"\n        label=\"Email\"\n        validate={getValidation(validationResults.email)}\n        onChange={e => {\n          trackValidation(e);\n          trackUserChanges(e);\n        }}\n        value={user.email || ''} />\n      <TextInput\n        className={`${prefix}-user-form__input`}\n        id=\"phone\"\n        name=\"phone\"\n        label=\"Phone\"\n        validate={getValidation(validationResults.phone)}\n        onChange={e => {\n          trackValidation(e);\n          trackUserChanges(e);\n          e.target.value = displayPhone(e.target.value);\n        }}\n        value={displayPhone(user.phone) || ''} />\n      <input\n        className={`${prefix}-user-form__input`}\n        id=\"id\"\n        name=\"id\"\n        value={user.id || ''}\n        type=\"hidden\" />\n      <div className={`${prefix}-user-form__actions`}>\n        <Button\n          size=\"lg\"\n          styleType=\"primary\"\n          type=\"submit\"\n          disabled={disabledSubmit}>Save</Button>\n        <Button\n          size=\"lg\"\n          styleType=\"secondary\"\n          onClick={clearForm}>Cancel</Button>\n      </div>\n    </form>\n  );\n\n  function trackUserChanges (e) {\n    user[e.target.id] = e.target.id === 'phone' ? cleanPhone(e.target.value) : e.target.value.trim();\n    setUser(new User(user));\n    enableSaveButton(user, userCopy);\n  }\n\n  function trackValidation (e) {\n    validationResults[e.target.id] = validate[e.target.id](e.target.value.trim());\n    setValidationResults(new User(validationResults, true));\n  }\n\n  function clearForm (e) {\n    switchPanel(e);\n    setUser(new User());\n\n    Object.keys(validationResults).forEach(key => {\n      validationResults[key] = '';\n    });\n\n    setValidationResults(new User(validationResults, true))\n  }\n\n  function enableSaveButton (user, userCopy) {\n    console.log(user, userCopy);\n    console.log(userHasChanged(user, userCopy), validateEverything(user));\n    if (userHasChanged(user, userCopy) && validateEverything(user)) {\n      setDisabledSubmit(false); // ready to submit\n    } else {\n      setDisabledSubmit(true); // not ready to submit\n    }\n  }\n\n  function validateEverything (user) {\n    const keys = Object.keys(user);\n\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i];\n\n      if (key !== 'id' && !validate[key](user[key])) {\n        return false; // something went wrong\n      }\n    }\n\n    return true; // everything checks out\n  }\n\n  function userHasChanged (user, userCopy) {\n    if (!userCopy) {\n      return true; // nothing exists, so something has to be different\n    }\n\n    const keys = Object.keys(user);\n\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i];\n\n      if (key !== 'id'\n        && user[key]\n        && userCopy[key]\n        && user[key] !== userCopy[key]) {\n        return true; // something is different!\n      }\n    }\n  }\n\n  function saveForm (e) {\n    e.preventDefault();\n\n    saveUser(user).then((savedUser) => {\n      switchPanel(e);\n      sharedState.saveUser(savedUser, editUser.index);\n    });\n  }\n\n  function cleanPhone (str) {\n    return str.replace(/\\D/g, '');\n  }\n\n  function displayPhone (str = '') {\n    let formattedPhone;\n    str = cleanPhone(str);\n\n    if (str.length <= 7) {\n      formattedPhone = [str.slice(0,3), str.slice(3, str.length)];\n    } else {\n      formattedPhone = [str.slice(0,3), str.slice(3,6), str.slice(6, str.length)];\n    }\n\n    return formattedPhone.filter(d => d.length).join('-');\n  }\n\n  function getValidation (result) {\n    if (result === false) {\n      return 'error';\n    } else if (result === true) {\n      return 'valid';\n    }\n\n    return '';\n  }\n}\n\nexport default UserForm;\n"]},"metadata":{},"sourceType":"module"}